{"version":3,"sources":["scripts/main.js"],"names":["button","document","querySelector","addEventListener","handleStartClick","messageLose","messageWin","gameField","rows","allCells","querySelectorAll","setGlobalHandleKeydown","keyCode","clickArrowUp","clickArrowDown","clickArrowRight","clickArrowLeft","addRandomCell","emptyCells","filter","cell","textContent","length","randomCell","Math","floor","random","cellContent","classList","add","handleRestarClick","innerHTML","className","updateScore","isBlocked","checkBefoCellChange","isMoved","isMerged","remove","value","e","code","i","item","cellIndex","reverse","getLoseStatus","row","cells","mergeCells","cell1","cell2","content","innerText","getWinnerStatus","moveCells","newValue","k","find","emptyCell","arrowsStatus"],"mappings":"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","file":"main.7eeb6f96.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nconst button = document.querySelector('.game-header .button');\n\nbutton.addEventListener('click', handleStartClick);\n\nconst messageLose = document.querySelector('.message-lose');\nconst messageWin = document.querySelector('.message-win');\n\nconst gameField = document.querySelector('.game-field');\nconst rows = [...gameField.rows];\nconst allCells = [...gameField.querySelectorAll('td')];\n\nfunction setGlobalHandleKeydown(keyCode) {\n  if (keyCode === 'ArrowUp') {\n    clickArrowUp();\n  }\n\n  if (keyCode === 'ArrowDown') {\n    clickArrowDown();\n  }\n\n  if (keyCode === 'ArrowRight') {\n    clickArrowRight();\n  }\n\n  if (keyCode === 'ArrowLeft') {\n    clickArrowLeft();\n  }\n}\n\nfunction addRandomCell() {\n  const emptyCells = allCells.filter(cell => cell.textContent.length === 0);\n\n  const randomCell = Math.floor(Math.random() * emptyCells.length);\n  const cellContent = Math.random() < 0.9 ? 2 : 4;\n\n  if (!emptyCells) {\n    return;\n  }\n\n  emptyCells[randomCell].textContent = cellContent;\n  emptyCells[randomCell].classList.add(`field-cell--${cellContent}`);\n}\n\nfunction handleRestarClick() {\n  messageWin.classList.add('hidden');\n  messageLose.classList.add('hidden');\n\n  for (const cell of allCells) {\n    cell.innerHTML = '';\n    cell.className = 'field-cell';\n  }\n\n  addRandomCell();\n  addRandomCell();\n  updateScore(0);\n\n  clickArrowUp.isBlocked = false;\n  clickArrowDown.isBlocked = false;\n  clickArrowRight.isBlocked = false;\n  clickArrowLeft.isBlocked = false;\n  checkBefoCellChange.isMoved = false;\n  checkBefoCellChange.isMerged = false;\n}\n\nfunction handleStartClick() {\n  button.innerHTML = 'Restart';\n  button.classList.remove('start');\n  button.classList.add('restart');\n  document.querySelector('.message-start').classList.add('hidden');\n  updateScore.value = 0;\n\n  document.addEventListener('keydown', e => setGlobalHandleKeydown(e.code));\n\n  document.querySelector('.restart').addEventListener('click',\n    handleRestarClick);\n\n  addRandomCell();\n  addRandomCell();\n}\n\nfunction clickArrowUp() {\n  for (let i = 0; i < 4; i++) {\n    const column = allCells.filter(item => item.cellIndex === i).reverse();\n\n    checkBefoCellChange(column);\n  }\n\n  if (checkBefoCellChange.isMerged || checkBefoCellChange.isMoved) {\n    addRandomCell();\n    checkBefoCellChange.isMerged = false;\n    checkBefoCellChange.isMoved = false;\n    clickArrowUp.isBlocked = false;\n  } else {\n    clickArrowUp.isBlocked = true;\n    getLoseStatus();\n  }\n}\n\nfunction clickArrowDown() {\n  for (let i = 0; i < 4; i++) {\n    const column = allCells.filter(item => item.cellIndex === i);\n\n    checkBefoCellChange(column);\n  }\n\n  if (checkBefoCellChange.isMerged || checkBefoCellChange.isMoved) {\n    addRandomCell();\n    checkBefoCellChange.isMerged = false;\n    checkBefoCellChange.isMoved = false;\n    clickArrowDown.isBlocked = false;\n  } else {\n    clickArrowDown.isBlocked = true;\n    getLoseStatus();\n  }\n}\n\nfunction clickArrowRight() {\n  for (const row of rows) {\n    const rowCells = [...row.cells];\n\n    checkBefoCellChange(rowCells);\n  }\n\n  if (checkBefoCellChange.isMerged || checkBefoCellChange.isMoved) {\n    addRandomCell();\n    checkBefoCellChange.isMerged = false;\n    checkBefoCellChange.isMoved = false;\n    clickArrowRight.isBlocked = false;\n  } else {\n    clickArrowRight.isBlocked = true;\n    getLoseStatus();\n  }\n}\n\nfunction clickArrowLeft() {\n  for (const row of rows) {\n    const rowCells = [...row.cells].reverse();\n\n    checkBefoCellChange(rowCells);\n  }\n\n  if (checkBefoCellChange.isMerged || checkBefoCellChange.isMoved) {\n    addRandomCell();\n    checkBefoCellChange.isMerged = false;\n    checkBefoCellChange.isMoved = false;\n    clickArrowLeft.isBlocked = false;\n  } else {\n    clickArrowLeft.isBlocked = true;\n    getLoseStatus();\n  }\n}\n\nfunction mergeCells(cell1, cell2) {\n  const content = +cell2.innerText + +cell1.innerText;\n\n  cell2.innerText = content;\n  cell2.classList.remove(cell2.classList[1]);\n  cell2.classList.add(`field-cell--${content}`);\n  cell1.innerText = '';\n  cell1.classList.remove(cell1.classList[1]);\n  getWinnerStatus();\n}\n\nfunction moveCells(cell1, cell2) {\n  cell2.innerText = cell1.innerText;\n  cell2.classList.add(`field-cell--${cell1.innerText}`);\n  cell1.innerText = '';\n  cell1.classList.remove(cell1.classList[1]);\n}\n\nfunction updateScore(newValue) {\n  updateScore.value += newValue;\n\n  const score = document.querySelector('.game-score');\n\n  score.innerText = updateScore.value;\n}\n\nfunction checkBefoCellChange(cells) {\n  for (let k = 0; k < cells.length - 1; k++) {\n    if (!cells[k].innerText) {\n      continue;\n    }\n\n    if (!cells[k + 1].innerText) {\n      moveCells(cells[k], cells[k + 1]);\n      checkBefoCellChange.isMoved = true;\n    }\n\n    if (+cells[k].innerText !== +cells[k + 1].innerText) {\n      continue;\n    }\n\n    if (+cells[k].innerText === +cells[k + 1].innerText) {\n      mergeCells(cells[k], cells[k + 1]);\n      updateScore(+cells[k].innerText + +cells[k + 1].innerText);\n      checkBefoCellChange.isMerged = true;\n      break;\n    }\n  }\n}\n\nfunction getWinnerStatus() {\n  const winnerValue = allCells.find(item => +item.innerText === 2048);\n\n  if (winnerValue) {\n    messageWin.classList.remove('hidden');\n  }\n}\n\nfunction getLoseStatus() {\n  const emptyCell = allCells.find(item => item.innerText.length === 0);\n  const arrowsStatus = clickArrowUp.isBlocked && clickArrowRight.isBlocked\n    && clickArrowLeft.isBlocked && clickArrowDown.isBlocked;\n\n  if (!emptyCell && arrowsStatus) {\n    messageLose.classList.remove('hidden');\n  }\n}\n"]}